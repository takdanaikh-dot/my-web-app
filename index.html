<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEWS2 Smart Analyzer</title>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@300;400;500;600;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --glass: rgba(255, 255, 255, 0.98);
            --primary-gradient: linear-gradient(135deg, #4158D0 0%, #C850C0 46%, #FFCC70 100%);
            --soft-purple: #6c5ce7;
            --text-main: #1e293b;
            --text-sub: #64748b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }

        body {
            font-family: 'IBM Plex Sans Thai', 'Inter', sans-serif;
            background: var(--primary-gradient);
            background-attachment: fixed;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            color: var(--text-main);
            -webkit-font-smoothing: antialiased;
        }

        .app-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            max-width: 500px;
            width: 100%;
            border-radius: 32px;
            padding: 40px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .header h1 {
            margin: 0;
            font-family: 'Inter', sans-serif;
            font-weight: 700;
            font-size: 1.8rem;
            letter-spacing: -0.025em;
            background: linear-gradient(to right, #6c5ce7, #a29bfe);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
        }

        .header p {
            color: var(--text-sub);
            font-size: 0.95rem;
            text-align: center;
            font-weight: 400;
            margin-top: 8px;
            margin-bottom: 35px;
        }

        .label-text {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9rem;
            font-weight: 600; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ */
            color: #475569;
            margin-bottom: 10px;
            letter-spacing: 0.01em;
        }

        .input-box {
            background: #f8fafc;
            padding: 15px 20px;
            border-radius: 20px;
            border: 1px solid #e2e8f0;
            margin-bottom: 18px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .input-box:focus-within {
            background: #fff;
            border-color: var(--soft-purple);
            box-shadow: 0 10px 15px -3px rgba(108, 92, 231, 0.1);
            transform: scale(1.02);
        }

        input, select {
            width: 100%;
            border: none;
            outline: none;
            font-size: 1.1rem;
            font-weight: 500;
            color: var(--text-main);
            background: transparent;
            font-family: inherit;
        }

        input::placeholder {
            color: #cbd5e1;
            font-weight: 300;
        }

        .actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        button {
            padding: 18px;
            border: none;
            border-radius: 20px;
            font-size: 0.95rem;
            font-weight: 700;
            font-family: 'Inter', sans-serif;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            letter-spacing: 0.05em;
        }

        .btn-analyze {
            flex: 2;
            background: #1e293b;
            color: white;
            box-shadow: 0 10px 20px -5px rgba(30, 41, 59, 0.4);
        }

        .btn-analyze:hover {
            background: #000;
            transform: translateY(-2px);
        }

        .btn-reset {
            flex: 1;
            background: #fff;
            color: #64748b;
            border: 1px solid #e2e8f0;
        }

        .btn-reset:hover { background: #f1f5f9; }

        .result-container {
            margin-top: 35px;
            display: none;
            animation: slideUp 0.6s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .score-card {
            text-align: center;
            padding: 35px;
            border-radius: 28px;
            color: white;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .score-val {
            font-family: 'Inter', sans-serif;
            font-size: 5rem;
            font-weight: 800;
            line-height: 1;
            margin: 10px 0;
            letter-spacing: -0.05em;
        }

        .risk-status {
            font-size: 1.25rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .guideline-box {
            background: white;
            margin-top: -25px;
            padding: 40px 25px 30px;
            border-radius: 0 0 28px 28px;
            font-size: 1rem;
            color: #334155;
            line-height: 1.8;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }

        b { font-weight: 600; color: #0f172a; }

        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        .full-width { grid-column: span 2; }
    </style>
</head>
<body>

<div class="app-card">
    <div class="header">
        <h1>NEWS2 SMART Analyzer</h1>
        <p>‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏≤‡∏á‡∏Ñ‡∏•‡∏¥‡∏ô‡∏¥‡∏Å‡πÅ‡∏ö‡∏ö‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥</p>
    </div>

    <div class="input-grid">
        <div class="input-box">
            <div class="label-text">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏¢‡πÉ‡∏à</div>
            <input type="number" id="rr" placeholder="0">
        </div>

        <div class="input-box">
            <div class="label-text">‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥ (¬∞C)</div>
            <input type="number" step="0.1" id="temp" placeholder="37.0">
        </div>

        <div class="input-box full-width">
            <div class="label-text">‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ SpO‚ÇÇ</div>
            <select id="spo2_scale">
                <option value="1">‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (Scale 1)</option>
                <option value="2">COPD / CO2 ‡∏Ñ‡∏±‡πà‡∏á (Scale 2)</option>
            </select>
        </div>

        <div class="input-box">
            <div class="label-text">SpO‚ÇÇ (%)</div>
            <input type="number" id="spo2" placeholder="0">
        </div>

        <div class="input-box">
            <div class="label-text">‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏≠‡∏Å‡∏ã‡∏¥‡πÄ‡∏à‡∏ô</div>
            <select id="is_oxygen">
                <option value="0">Air</option>
                <option value="2">Oxygen</option>
            </select>
        </div>

        <div class="input-box">
            <div class="label-text">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ö‡∏ô</div>
            <input type="number" id="sbp" placeholder="SBP">
        </div>

        <div class="input-box">
            <div class="label-text">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏ä‡∏µ‡∏û‡∏à‡∏£</div>
            <input type="number" id="pulse" placeholder="BPM">
        </div>

        <div class="input-box full-width">
            <div class="label-text">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ï‡∏±‡∏ß</div>
            <select id="cvpu">
                <option value="0">‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ï‡∏±‡∏ß‡∏î‡∏µ (Alert)</option>
                <option value="3">‡∏™‡∏±‡∏ö‡∏™‡∏ô/‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ï‡∏±‡∏ß (CVPU)</option>
            </select>
        </div>
    </div>

    <div class="actions">
        <button class="btn-reset" onclick="resetForm()">RESET</button>
        <button class="btn-analyze" onclick="analyzeNEWS2()">ANALYZE</button>
    </div>

    <div id="result" class="result-container">
        <div id="score-card" class="score-card">
            <div id="risk-status" class="risk-status">--</div>
            <div id="total-score" class="score-val">0</div>
            <div style="font-weight: 500; opacity: 0.9; font-size: 0.9rem; letter-spacing: 0.05em;">NEWS2 TOTAL SCORE</div>
        </div>
        <div class="guideline-box" id="guideline-content"></div>
    </div>
</div>

<script>
    function analyzeNEWS2() {
        let score = 0;
        let redFlag = false;
        const val = (id) => parseFloat(document.getElementById(id).value);
        
        const rr = val('rr'), spo2 = val('spo2'), scale = document.getElementById('spo2_scale').value;
        const o2 = val('is_oxygen'), sbp = val('sbp'), pulse = val('pulse'), cvpu = val('cvpu'), temp = val('temp');

        if ([rr, spo2, sbp, pulse, temp].some(isNaN)) {
            alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô"); return;
        }

        let s;
        // Logic ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô NEWS2
        s=0; if(rr<=8||rr>=25)s=3; else if(rr>=21)s=2; else if(rr<=11)s=1; 
        score+=s; if(s===3)redFlag=true;

        s=0;
        if(scale==="1") {
            if(spo2<=91)s=3; else if(spo2<=93)s=2; else if(spo2<=95)s=1;
        } else {
            if(spo2<=83)s=3; else if(spo2<=85)s=2; else if(spo2<=87)s=1;
            else if(o2===2 && spo2>=93) { if(spo2>=97)s=3; else if(spo2>=95)s=2; else s=1; }
        }
        score+=s; if(s===3)redFlag=true;

        score+=o2;
        s=0; if(sbp<=90||sbp>=220)s=3; else if(sbp<=100)s=2; else if(sbp<=110)s=1;
        score+=s; if(s===3)redFlag=true;

        s=0; if(pulse<=40||pulse>=131)s=3; else if(pulse>=111)s=2; else if(pulse<=50||pulse>=91)s=1;
        score+=s; if(s===3)redFlag=true;

        score+=cvpu; if(cvpu===3)redFlag=true;

        s=0; if(temp<=35)s=3; else if(temp>=39.1)s=2; else if(temp<=36||temp>=38.1)s=1;
        score+=s; if(s===3)redFlag=true;

        render(score, redFlag);
    }

    function render(total, hasRed) {
        const res = document.getElementById('result');
        const card = document.getElementById('score-card');
        const status = document.getElementById('risk-status');
        const content = document.getElementById('guideline-content');
        
        res.style.display = 'block';
        document.getElementById('total-score').innerText = total;
        card.className = 'score-card';

        let info = "";
        if(total >= 7) {
            card.style.background = 'linear-gradient(135deg, #ef4444, #b91c1c)'; 
            status.innerText = "üö® High Risk";
            info = "<b>‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á:</b> ‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ<br><b>‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°:</b> ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á (Continuous)<br><b>‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á:</b> ‡πÅ‡∏à‡πâ‡∏á‡∏ó‡∏µ‡∏°‡∏Å‡∏π‡πâ‡∏ä‡∏µ‡∏û (RRT/MET) ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ";
        } else if(total >= 5 || hasRed) {
            card.style.background = 'linear-gradient(135deg, #f59e0b, #d97706)'; 
            status.innerText = "‚ö†Ô∏è Medium Risk";
            let msg = hasRed ? "‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏Ñ‡πà‡∏≤‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏£‡∏≤‡∏¢‡∏ï‡∏±‡∏ß (Red Score)" : "‡πÄ‡∏ù‡πâ‡∏≤‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏Å‡∏•‡πâ‡∏ä‡∏¥‡∏î";
            info = `<b>‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á:</b> ‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô<br><b>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</b> ${msg}<br><b>‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°:</b> ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏ó‡∏∏‡∏Å 1 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á<br><b>‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á:</b> ‡∏ï‡∏≤‡∏°‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏°‡∏≤‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ`;
        } else {
            card.style.background = 'linear-gradient(135deg, #10b981, #059669)'; 
            status.innerText = "‚úÖ Low Risk";
            info = "<b>‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á:</b> ‡∏î‡∏π‡πÅ‡∏•‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢<br><b>‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°:</b> ‡∏ó‡∏∏‡∏Å 4-6 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á<br><b>‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á:</b> ‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏ß‡∏¥‡∏ä‡∏≤‡∏ä‡∏µ‡∏û‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ã‡πâ‡∏≥‡∏ï‡∏≤‡∏°‡∏£‡∏≠‡∏ö";
        }
        content.innerHTML = info;
        res.scrollIntoView({ behavior: 'smooth' });
    }

    function resetForm() {
        document.querySelectorAll('input').forEach(i=>i.value='');
        document.querySelectorAll('select').forEach(s=>s.selectedIndex=0);
        document.getElementById('result').style.display = 'none';
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
</script>
</body>
</html>